{% extends "index.html" %}
{% block title %}Resource Utilisation Report{% endblock %}

{% block content %}
<h2>Resource Utilisation Report</h2>

<form method="POST" style="margin-bottom: 20px;">
    <div style="display: flex; gap: 20px; align-items: flex-end;">
        <div>
            <label>Start Date:</label>
            <input type="datetime-local" name="start_date" required>
        </div>

        <div>
            <label>End Date:</label>
            <input type="datetime-local" name="end_date" required>
        </div>

        <div>
            <button type="submit">Generate</button>
        </div>
    </div>
</form>

{% if report %}
<table border="1" cellpadding="10" cellspacing="0" width="100%">
    <tr>
        <th>Resource</th>
        <th>Total Hours Utilised</th>
        <th>Upcoming Bookings</th>
    </tr>

    {% for row in report %}
    <tr>
        <td>{{row.resource}}</td>
        <td>{{row.total_hours}}</td>
        <td>{{row.upcoming}}</td>
    </tr>
    {% endfor %}
</table>

{% elif start_date and end_date %}
<p>No utilisation found</p>
{% endif %}

{% endblock %}
